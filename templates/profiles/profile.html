{% extends 'base.html' %}
{% load static %}
{% block content %}
    <div class="row">
        <h1>Profile</h1>
        <br>
        <form method="post">
            {% csrf_token %}
            {% if request.user.id == user.id %}
                <p>
                    <a href="{% url 'update_profile'  %}" class="btn btn-outline-secondary">Update Profile</a>
                    <a href="{% url 'delete_profile' %}" class="btn btn-outline-danger">Delete Profile</a>
                </p>
        </form>
            {% endif %}
            {% if user.avatar.picture %}
        <div class="col mb-3" style="max-width: 1000px;">
            <div class="col-md-4">
              <img src="{{ user.avatar.picture.url }}" width=200 height=200 class="rounded-circle" alt="Profile">
            </div>
              {% else %}
              <div class="col-md-4">
                  <img src="{% static 'images/default_user_pic.png' %}" width=250 height=250 class="rounded-circle" alt="Profile">
              </div>
        </div>
              {% endif %}
                <div class="col-md-8">
                    <div class="card-body">
                        <p>User: {{ user.username }}</p>
                        <p>Email: {{ user.email }}</p>
                        <p>Full name: {{ user.full_name }}</p>
                        <p>Bio: {{ user.bio }}</p>
                        <p>Posts: {{ post_count }}</p>
                    </div>
                </div>
          </div>
        </div>
    </div>
{% for post in posts %}
<div class="card">
    <div class="card-body">
        <br>
        <div class="container">
            {% for images in post.pictures.all %}
                <img src="{{ images.picture.url }}" width=200 height=200 class="rounded" alt="Post">
            {% endfor %}
            <p>
            <div class="alert alert-secondary" role="alert">
                <p>{{ post }}</p>
                {% for tag in post.tags.all %}
                    #{{ tag }}
                {% endfor %}
            </div>
            <p>Post publication date: {{ post.pub_date|date:"d.m.Y" }}</p>
            <div class="alert alert-primary col-md-1" role="alert">
                Likes {{ post.likes_count }}
            </div>
            <p>
        {% if request.user.id == user.id %}
            <a href="{% url 'post_update' post.id  %}" class="btn btn-outline-secondary">Update Post</a>
            <a href="{% url 'post_delete' post.id %}" class="btn btn-outline-danger">Delete Post</a>
        {% endif %}
        </div>
    </div>
</div>
<br>
{% endfor %}
{% endblock %}
