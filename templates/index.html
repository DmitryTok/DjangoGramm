{% extends 'base.html' %}
{% load static %}
{% block content %}
<h1>Posts</h1>
    <hr>
    {% for post in posts %}
            <div class="card">
               <div class="card-body">
                  <div class="container">
                      <p>
                        {% if post.user.avatar %}
                            <div class="col-md-2">
                              <img src="{{ post.user.avatar.url }}" width=200 height=200 class="img-fluid rounded-start" alt="Profile">
                            </div>
                              {% else %}
                              <div class="col-md-2">
                                  <img src="{% static 'images/default_user_pic.png' %}" width=200 height=200 class="img-fluid rounded-start" alt="Profile">
                              </div>
                        {% endif %}
                      <br>
                      <h3>User: <a href="{% url 'profile' post.user.id %}">{{ post.user.username }}</a></h3>
                      </p>
                      <div class="alert alert-secondary" role="alert">
                            <p>{{ post }}</p>
                            {% for tag in post.tags.all %}
                                #{{ tag }}
                            {% endfor %}
                      </div>
                      <p>Post publication date: {{ post.pub_date|date:"d.m.Y" }}</p>
                      {% if request.user.is_authenticated %}
                      <form action="{% url 'post_like' post.id %}" method="post">
                          {% csrf_token %}
                          {% if user in post.likes.all %}
                            Likes {{ post.likes_count }} <button type="submit" class="btn btn-primary">Like</button>
                          {% else %}
                            Likes {{ post.likes_count }} <button type="submit" class="btn btn-outline-primary">Like</button>
                          {% endif %}
                      </form>
                      {% endif %}
                  </div>
               </div>
            </div>
            <br>
    {% endfor %}
{% endblock %}